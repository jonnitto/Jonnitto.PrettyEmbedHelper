import{b,d as w}from"./chunk-TTJLV6PQ.js";var v="prettyembed";function x(i){i.directive("prettyembedvimeo",(d,{modifiers:l,expression:s},{evaluate:n})=>{let p=l.includes("lightbox")?"lightbox":"inline",c=l.includes("slim"),r={style:p,slim:c,...n(s||"{}")};P({element:d,Alpine:i,options:r})})}function P({element:i,Alpine:d,options:l}){let s="Vimeo",{style:n,slim:p,video:c,color:r,loop:h,gdpr:$,background:V}=l,g={id:c,autopip:!0,autoplay:!0,pip:!0,portrait:!1,responsive:!1,title:!1,byline:!1,background:!!V,loop:!!h,autopause:!1,controls:!p};r&&(g.color=r);let f=window.localStorage,y=`jonnittoprettyembed_gdpr_${s.toLowerCase()}`,A={loaded:!1,playing:!1,lightbox:n==="lightbox"?!1:null,gdpr:$&&f.getItem(y)!=="true"?"needCheck":"isAccepted"},t=null;d.bind(i,{"x-data"(){return{...A,init(){this.lightbox!==null&&this.$watch("lightbox",(e,u)=>{!e&&e!==u&&this.pause()})},acceptGdpr(){f.setItem(y,"true"),this.$dispatch("prettyembedAcceptGdpr",s),this.load()},play(){t?.play()},pause(){t?.pause()},load(e){if(e&&e.preventDefault(),this.gdpr!="isAccepted"){this.gdpr="isOpen";return}if(this.lightbox!==null&&(this.lightbox=!0),this.loaded){this.play();return}b(()=>{let u=this.$refs?.vimeo||i;t=new window.Vimeo.Player(u,g);let m=async a=>{let I=[t.getVideoTitle(),t.getVideoId(),t.getVideoUrl(),t.getCurrentTime(),t.getEnded()],o=await Promise.allSettled(I);return o[4].value&&(a="finished",!h&&!this.lightbox&&!w()&&this.reset()),{event:a,type:s,style:n,title:o[0].value,videoID:o[1].value,videoUrl:o[2].value,currentTime:o[3].value}};t.on("play",async()=>{let a=await m("play");this.$dispatch("prettyembedPauseInternal",i),this.loaded=!0,this.playing=!0,this.$dispatch(v,a)}),t.on("pause",async()=>{let a=await m("pause");this.playing=!1,this.$dispatch(v,a)})})},async reset(){t&&(await this.pause(),await t.destroy(),t=null,this.loaded=!1,this.playing=!1)}}},"@prettyembedAcceptGdpr.window"({detail:e}){e==s&&(this.gdpr="isAccepted")},"@prettyembedPauseInternal.window"({detail:e}){e!=this.$root&&this.pause()}})}window.addEventListener("alpine:init",()=>{window.Alpine.plugin(x)});
