import{a as r,d as h}from"./chunk-TTJLV6PQ.js";var m="prettyembed",f="/_Resources/Static/Packages/Jonnitto.PrettyEmbedHelper/Scripts/Hls.js?v=1.5.9";function c(t){t.directive("prettyembedmedia",(i,{value:a,modifiers:e,expression:n},{evaluate:o})=>{if(a==="media"){y({element:i,Alpine:t,src:n});return}let d=e.includes("streaming"),s=e.includes("lightbox")?"lightbox":"inline",l={streaming:d,style:s,...o(n||"{}")};_({element:i,Alpine:t,options:l})})}function _({element:t,Alpine:i,options:a}){let{style:e,streaming:n}=a,o={type:null,playing:!1,url:null,id:null,autoplay:!1,loaded:!1,lightbox:e==="lightbox"?!1:null,__media:null},d=n?!g():null;i.bind(t,{"x-data"(){return{...o,play(){if(this.lightbox!==null&&(this.lightbox=!0),!!this.__media?.paused){if(!this.loaded&&n){if(d){if(this.lightbox){setTimeout(()=>{u(this.__media,this.url)},500);return}u(this.__media,this.url);return}this.__media.src=this.url}if(this.lightbox){setTimeout(()=>{this.__media?.play()},500);return}this.__media?.play()}},pause(s=!1){s&&(this.autoplay||this.__media?.muted)||this.__media?.paused||this.__media?.pause()},reset(){this.autoplay||(this.pause(),this.__media?.currentTime&&(this.__media.currentTime=0),this.loaded=!1)},toogle(){if(this.__media.paused){this.play();return}this.pause()},dispatchEvent(s){let l=this.__media.currentTime;l===this.__media.duration&&(s="finished",!this.__media.loop&&!this.lightbox&&!h()&&this.reset()),this.$dispatch(m,{detail:{event:s,currentTime:l,type:this.type,style:e,autoplay:this.autoplay,url:this.url,id:this.id}})},init(){e==="lightbox"&&this.$watch("lightbox",(s,l)=>{!s&&s!==l&&this.pause()})}}},"@prettyembedPauseInternal.window"({detail:s}){s!=this.$root&&this.pause(!0)}})}function y({element:t,Alpine:i,src:a}){let n=t.tagName.toLowerCase()==="video"?"Video":"Audio";i.bind(t,{"x-init"(){this.__media=t,this.url=a||t.currentSrc,this.id=this.url.split("/").pop(),this.autoplay=t.autoplay,this.type=n},"@play"(){this.loaded||(this.loaded=!0),this.playing=!0,!this.autoplay&&!this.muted&&(this.$dispatch("prettyembedPauseInternal",this.$root),this.dispatchEvent("play"))},"@pause"(){this.playing=!1,this.autoplay=!1,this.muted||this.dispatchEvent("pause")}})}function g(){return!!document.createElement("video").canPlayType("application/vnd.apple.mpegurl")}function u(t,i){if(typeof window.Hls<"u"){p(t,i);return}r(f,()=>{setTimeout(()=>p(t,i),10)})}function p(t,i){let a=window.Hls;if(!a||!a.isSupported())return;let e=new a;e.loadSource(i),e.attachMedia(t),e.on(a.Events.MEDIA_ATTACHED,()=>t.play())}window.addEventListener("alpine:init",()=>{window.Alpine.plugin(c)});
